<template>
    <div class="page">
        <div class="appbar bg-template">
            <div class="appbar-inner">
                <div class="left">
                    <a href="" class="link back icon-only">
                        <i class="material-icons" style="color: #fff;font-size: 30px;">keyboard_arrow_left</i>
                        <span class="mx-2" style="color: #fff;font-size: 18px;">Check Out</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="block">
            <div class="row">
                <div class="col">
                    <video autoplay="true" id="video" width="500" height="200"></video>
                </div>
            </div>
            <div class="row">
                <div class="col align-self-center">
                    <h4 class="capture">test capture</h4>
                </div>
            </div>
            <div class="row text-align-center">
                    <canvas id="canvas" width="300" height="200" style="background-color: gray;" ></canvas>
            </div>
            
        </div>
    </div>
    </template>
    <script>

        return{
            on:{
                pageInit: async function(){
                    var self = this;
                    var app = self.$app;
                    var $ = self.$;
                    
                    var capture=document.getElementById("capture");
                    var canvas=document.getElementById("canvas");
                    var context=canvas.getContext('2d');

                    $('.capture').on('click',function(){
                        context.drawImage(video,0,0,300,200);
                    })

                    try{
                        const videoSrc=await navigator.mediaDevices.getUserMedia({video:true});
                        var video=document.getElementById("video");
                        video.srcObject=videoSrc;
                    }catch(e){
                        console.log(e);
                    }},
           }
           
        }
    </script>