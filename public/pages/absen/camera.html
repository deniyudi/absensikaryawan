<template>
    <div class="page">
        <div class="appbar bg-color-black">
            <div class="appbar-inner">
                <div class="left"></div>
                <div class="right">
                    <a href="" class="link back icon-only">
                        <i class="material-icons" style="color: gray;font-size: 30px;">close</i>
                    </a>
                </div>
            </div>
        </div>
        <div class="block h-100 mt-0 mb-0 bg-color-black ">
            <div class="row width-100 align-content-center text-align-center">
                    <video autoplay="true" id="video" width="110%" height="440"></video>
            </div>
            <div class="mt-2 row text-align-center">
                <div class="col align-self-center">
                    <div class="capture avatar avatar-40">
                        <button class="bg-color-red avatar avatar-40"></button>
                    </div>
                </div>
            </div>
            <div class="row text-align-center">
                    <canvas id="canvas" width="300" height="200" style="background-color: gray;" ></canvas>
            </div>
            
        </div>
    </div>
    </template>
    <script src="coba.js">
        return{
            on:{
                pageInit: async function(){
                    var self = this;
                    var app = self.$app;
                    var $ = self.$;
                    
                    var capture=document.getElementById("capture");
                    var canvas=document.getElementById("canvas");
                    var context=canvas.getContext('2d');

                    $('.capture').on('click',function(){
                        context.drawImage(video,0,0,300,200);
                    })

                    try{
                        const videoSrc=await navigator.mediaDevices.getUserMedia({video:true});
                        var video = document.getElementById("video");
                        video.srcObject=videoSrc;
                    }catch(e){
                        console.log(e);
                    }
                },
            }
        }
    </script>